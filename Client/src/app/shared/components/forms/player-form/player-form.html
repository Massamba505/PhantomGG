<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="flex flex-col space-y-3"
>
  @if (previewData()?.photoUrl) {
  <img
    [src]="previewData()!.photoUrl"
    [alt]="getFullName()"
    class="w-32 h-32 object-cover rounded-full border-2 border-gray-100 mx-auto"
  />
  }

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
    <div>
      <label class="input-label" for="firstName"
        >First Name
        <span class="required"><span class="required">*</span></span></label
      >
      <input
        id="firstName"
        type="text"
        formControlName="firstName"
        class="input-field"
        [class.error]="getFieldError('firstName')"
        placeholder="Enter first name"
      />
      @if (getFieldError('firstName')) {
      <span class="error-message">{{ getFieldError("firstName") }}</span>
      }
    </div>

    <div>
      <label class="input-label" for="lastName"
        >Last Name <span class="required">*</span></label
      >
      <input
        id="lastName"
        type="text"
        formControlName="lastName"
        class="input-field"
        [class.error]="getFieldError('lastName')"
        placeholder="Enter last name"
      />
      @if (getFieldError('lastName')) {
      <span class="error-message">{{ getFieldError("lastName") }}</span>
      }
    </div>
  </div>

  <div>
    <label class="input-label" for="position"
      >Position <span class="required">*</span></label
    >
    <select
      id="position"
      formControlName="position"
      class="input-field"
      [class.error]="getFieldError('position')"
    >
      <option value="">Select a position</option>
      @for (option of positionOptions; track option.value) {
      <option [value]="option.value">{{ option.label }}</option>
      }
    </select>
    @if (getFieldError('position')) {
    <span class="error-message">{{ getFieldError("position") }}</span>
    }
  </div>

  <div>
    <label class="input-label" for="email">Email</label>
    <input
      id="email"
      type="email"
      formControlName="email"
      class="input-field"
      [class.error]="getFieldError('email')"
      placeholder="player@example.com"
    />
    @if (getFieldError('email')) {
    <span class="error-message">{{ getFieldError("email") }}</span>
    }
  </div>

  <div>
    <label class="input-label" for="photo">Player Photo</label>
    <div class="">
      <input
        id="photo"
        type="file"
        accept="image/*"
        class="input-field"
        (change)="onFileSelect($event)"
      />
    </div>
  </div>

  <div class="flex justify-center items-center gap-2">
    <button type="button" class="btn btn-outline" (click)="onCancel()">
      Cancel
    </button>
    <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
      <lucide-angular
        [img]="isEditMode ? icons.Save : icons.Plus"
        [size]="16"
      ></lucide-angular>
      {{ getSubmitText() }}
    </button>
  </div>
</form>
