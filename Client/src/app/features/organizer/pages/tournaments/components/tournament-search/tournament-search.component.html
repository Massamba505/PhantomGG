<div class="card mb-4">
  <div class="space-y-4">
    <div class="flex flex-col md:flex-row flex-wrap gap-4">
      <div class="flex-1 min-w-[12em]">
        <label class="form-label">Search Tournaments</label>
        <input
          type="text"
          class="input-field"
          placeholder="Search by name or description..."
          [value]="searchTerm()"
          (input)="onSearchInput($event)"
        />
      </div>

      <div class="flex-1 min-w-[12em]">
        <label class="form-label">Status</label>
        <select
          class="form-select"
          [value]="selectedStatus() || ''"
          (change)="onStatusChange($event)"
        >
          <option value="">All Status</option>
          <option value="Draft">Draft</option>
          <option value="RegistrationOpen">Registration Open</option>
          <option value="RegistrationClosed">Registration Closed</option>
          <option value="InProgress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>

      <div class="flex items-end gap-2">
        <button
          class="btn btn-outline"
          (click)="clearFilters()"
          [disabled]="!hasFilters()"
        >
          Clear
        </button>
        <div class="flex items-end">
          <button
            class="btn btn-primary"
            (click)="search()"
            [disabled]="!hasFilters()"
          >
            Search
          </button>
        </div>
      </div>
    </div>

    <details class="group">
      <summary class="cursor-pointer text-sm font-medium">
        <span class="group-close:hidden group-open:hidden position"
          >Show Advanced Filters</span
        >
        <span class="hidden group-open:inline">Hide Advanced Filters</span>
      </summary>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div>
          <label class="form-label">Location</label>
          <input
            type="text"
            class="input-field"
            placeholder="location..."
            [value]="location()"
            (input)="onLocationInput($event)"
          />
        </div>

        <div>
          <label class="form-label">Tournament Format</label>
          <select
            class="form-select"
            [value]="formatId() || ''"
            (change)="onFormatChange($event)"
          >
            <option value="All">All Formats</option>
            @for (format of formats(); track format.id) {
            <option [value]="format.name">{{ format.name }}</option>
            }
          </select>
        </div>

        <div>
          <label class="form-label">Visibility</label>
          <select
            class="form-select"
            [value]="
              isPublic() === undefined ? 'All' : isPublic() ? 'true' : 'false'
            "
            (change)="onIsPublicChange($event)"
          >
            <option value="All">All Tournaments</option>
            <option value="true">Public Only</option>
            <option value="false">Private Only</option>
          </select>
        </div>
        <div>
          <label class="form-label">Start Date From</label>
          <input
            type="date"
            class="input-field"
            [value]="startDateFrom() || ''"
            (change)="onStartDateFromChange($event)"
          />
        </div>

        <div>
          <label class="form-label">Start Date To</label>
          <input
            type="date"
            class="input-field"
            [value]="startDateTo() || ''"
            (change)="onStartDateToChange($event)"
          />
        </div>
      </div>
    </details>

    @if (hasFilters()) {
    <div class="text-sm text-gray-600 rounded-lg p-3">
      <span class="font-medium">Active filters:</span>
      @if (searchTerm()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        Search: "{{ searchTerm() }}"
      </span>
      } @if (selectedStatus()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        Status: {{ selectedStatus() }}
      </span>
      } @if (location()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        Location: {{ location() }}
      </span>
      } @if (formatId()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        Format: {{ formatId() }}
      </span>
      } @if (isPublic() !== undefined) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        {{ isPublic() ? "Public" : "Private" }}
      </span>
      } @if (startDateFrom()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        From: {{ startDateFrom() }}
      </span>
      } @if (startDateTo()) {
      <span class="ml-2 inline-block btn btn-outline text-xs">
        To: {{ startDateTo() }}
      </span>
      }
    </div>
    }
  </div>
</div>
